# GEMINI.md

This file provides instructions for Gemini on how to interact with this Java project.

## Project Overview

This project serves as a template for a standalone Java console application, built using the Spring Boot framework. It is configured to run as a `CommandLineRunner`, making it suitable for command-line tasks. The project includes essential functionalities like logging with SLF4J and Logback, and a testing framework based on JUnit 5.

## Development Environment

- **JDK Version**: This project requires **Java 21**.
- **Environment**: The use of a **Dev Container** is recommended for a consistent development environment.

## Dependencies

The project dependencies are managed by Maven in `pom.xml`. Key dependencies include:

- **Spring Boot Starter Parent**: Manages dependency versions.
- **Spring Boot Starter**: Core starter for Spring Boot applications.
- **Spring Boot DevTools**: Provides fast application restarts, LiveReload, and configurations for a better development experience.
- **Spring Boot Starter Test**: For testing Spring Boot applications with libraries like JUnit 5, Mockito, and Spring Test.
- **Lombok**: To reduce boilerplate code.
- **Checkstyle**: `com.puppycrawl.tools:checkstyle`

## Coding Style

This project uses the **Google Java Style Guide**. Compliance is enforced by **Checkstyle**.

The style check is automatically run as part of the build. To run the check, execute:

```sh
./mvnw checkstyle:check
```

## Logging Policy

This project uses SLF4J and Logback for logging, which is the default for Spring Boot. The configuration is in `src/main/resources/logback.xml`, and logs are written to the console and to the `logs/app.log` file.

Log levels are used as follows:

- `ERROR`: For fatal errors that prevent the system from continuing.
- `WARN`: For potential problems.
- `INFO`: For normal operational information (e.g., application start/stop).
- `DEBUG`: For detailed information useful for debugging.
- `TRACE`: For even more fine-grained information than DEBUG.

## Testing Policy

1. **Framework**: Tests are written using **JUnit 5**, which is included in `spring-boot-starter-test`.
2. **Scope**: The focus is on unit and integration tests.
3. **Location**: Test classes are located in the `src/test/java` directory.
4. **Configuration**: Test-specific configurations can be placed in `src/test/resources`. For example, properties in `src/test/resources/application.properties` will override the main application properties during test execution.
5. **Execution**: Run tests using `./mvnw test`. All tests must pass for a change to be considered complete.
6. **Test Reports**: An HTML test report can be generated by running `./mvnw site`. The report will be available at `target/site/surefire-report.html`.

## Documentation Policy

1. **Format**: Public APIs (classes, methods, and fields) should be documented using **Javadoc** comments.
2. **Style**: Follow the conventions outlined in the **Google Java Style Guide's** section on Javadoc.
3. **Generation**: The `maven-javadoc-plugin` is configured in `pom.xml` to generate a Javadoc JAR.
4. **Build Integration**: The Javadoc JAR is automatically generated as part of the `mvn clean install` command.
5. **Manual Generation**: To generate the Javadoc documentation manually, run the following command. The output will be in the `target/site/apidocs` directory.

    ```sh
    ./mvnw javadoc:javadoc
    ```

## Profiles

This project uses both Spring Boot profiles and Maven profiles to manage different configurations.

### Spring Boot Profiles

Spring Boot profiles are used to control application properties and logging configuration.

- **`dev`**: The default profile for development. It uses settings from `application-dev.properties` and logs at the `INFO` level to both the console and a file.
- **`prod`**: The profile for production. It uses settings from `application-prod.properties` and logs at the `WARN` level to a file only.

### Maven Profiles

Maven profiles are used to control the build process and how the application is run.

- **`dev`**: This profile is **active by default**. It packages the application so that the `dev` Spring Boot profile is active.
- **`prod`**: This profile packages the application for production. It activates the `prod` Spring Boot profile. To use it, add `-P prod` to your Maven command.
  ```sh
  # Build the application with the prod profile
  ./mvnw clean install -P prod
  ```
- **`debug`**: This profile runs the application in debug mode, listening for a debugger on port `5005`. It does not affect the packaging of the application.
  ```sh
  # Run the application in debug mode
  ./mvnw spring-boot:run -P debug
  ```

## VS Code Launch Configurations

The `.code-workspace` file contains launch configurations for running and debugging the application directly from VS Code's "Run and Debug" view.

- **Run dev profile**: Launches the application with the `dev` Spring profile active.
- **Run prod profile**: Launches the application with the `prod` Spring profile active.
- **Attach to Remote Debugger**: Attaches the debugger to a running application that has been started in debug mode (e.g., via the `debug` Maven profile).

## Build

To build the project, use the `clean install` command. This command downloads dependencies, runs Checkstyle, compiles the source code, and packages it into a JAR file.

By default (without specifying a profile), the application is packaged with the `dev` Spring Boot profile active.

```sh
# Build with the default dev profile
./mvnw clean install
```

To build for production, activate the `prod` Maven profile. This will package the application with the `prod` Spring Boot profile active.

```sh
# Build with the prod profile
./mvnw clean install -P prod
```

## Run

To run the application, use the `spring-boot:run` command. By default, this will use the `dev` profile.

```sh
./mvnw spring-boot:run
```

To run with a specific profile, such as `prod`, use the `-P` flag:

```sh
./mvnw spring-boot:run -P prod
```

## Test

To run the project's tests, use the following command.

```sh
./mvnw test
```

## Project Structure

```text
java-app004/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── internal/
│   │   │       └── dev/
│   │   │           ├── App.java
│   │   │           └── javaapp004/
│   │   │               ├── GreetingProperties.java
│   │   │               └── JavaApp004Application.java
│   │   └── resources/
│   │       ├── application.properties
│   │       ├── application-dev.properties
│   │       ├── application-prod.properties
│   │       └── logback.xml
│   └── test/
│       ├── java/
│       │   └── internal/
│       │       └── dev/
│       │           └── javaapp004/
│       │               └── JavaApp004ApplicationTests.java
│       └── resources/
│           └── application.properties
├── .gitignore
├── .sdkmanrc
├── GEMINI.md
├── google_checks.xml
├── java-app004.code-workspace
├── mvnw
├── mvnw.cmd
├── pom.xml
└── README.md
```
